<div class="toolbox" ng-class="{'expanded':ctrl.expanded}">
    <div class="toolbox-wrapper expanded">
        <tool expanded="ctrl.expanded" uib-tooltip="Open Toolbox Details" tooltip-placement="right" popover-trigger="mouseenter">
            <i class="fa fa-bars" ng-class="{'fa-2x':!ctrl.expanded, 'fa-3x':ctrl.expanded}" ng-click="ctrl.toggleDetails()"></i>
        </tool>
        <tool expanded="ctrl.expanded" uib-tooltip="Preview Station" tooltip-placement="right" popover-trigger="mouseenter">
            <i class="fa fa-eye" ng-class="{'fa-2x':!ctrl.expanded, 'fa-3x':ctrl.expanded}" ng-click="ctrl.togglePreviewDetails()"></i>
        </tool>
        <tool expanded="ctrl.expanded" uib-tooltip="Light Map" tooltip-placement="right" popover-trigger="mouseenter">
            <i class="fa fa-map" ng-class="{'fa-2x':!ctrl.expanded, 'fa-3x':ctrl.expanded}" ng-click="ctrl.toggleMap('light')"></i>
        </tool>
        <tool expanded="ctrl.expanded" uib-tooltip="Dark Map" tooltip-placement="right" popover-trigger="mouseenter">
            <i class="fa fa-map-o" ng-class="{'fa-2x':!ctrl.expanded, 'fa-3x':ctrl.expanded}" ng-click="ctrl.toggleMap('dark')"></i>
        </tool>
        <tool expanded="ctrl.expanded" uib-tooltip="Satellite Map" tooltip-placement="right" popover-trigger="mouseenter">
            <i class="fa fa-globe" ng-class="{'fa-2x':!ctrl.expanded, 'fa-3x':ctrl.expanded}" ng-click="ctrl.toggleMap('satellite')"></i>
        </tool>
        <tool expanded="ctrl.expanded" uib-tooltip="Zoom Map Out" tooltip-placement="right" popover-trigger="mouseenter">
            <i class="fa fa-arrows-alt" ng-class="{'fa-2x':!ctrl.expanded, 'fa-3x':ctrl.expanded}" ng-click="ctrl.zoomMapOut()"></i>
        </tool>
        <tool expanded="ctrl.expanded" uib-tooltip="Center On Location" tooltip-placement="right" popover-trigger="mouseenter">
            <i class="fa fa-dot-circle-o" ng-class="{'fa-2x':!ctrl.expanded, 'fa-3x':ctrl.expanded}" ng-click="ctrl.centerMapOnLocation()"></i>
        </tool>
        <tool expanded="ctrl.expanded" uib-tooltip="Center On Marker" tooltip-placement="right" popover-trigger="mouseenter">
            <i class="fa fa-map-marker" ng-class="{'fa-2x':!ctrl.expanded, 'fa-3x':ctrl.expanded}" ng-click="ctrl.centerMapOnSelectedMarker()"></i>
        </tool>
        <tool expanded="ctrl.expanded" uib-tooltip="Show Data Plot" tooltip-placement="right" popover-trigger="mouseenter">
            <!--<i class="fa fa-bar-chart" ng-class="{'fa-2x':!ctrl.expanded, 'fa-3x':ctrl.expanded}" ng-click="ctrl.togglePlot()"></i>-->
            <i class="fa fa-line-chart" ng-class="{'fa-2x':!ctrl.expanded, 'fa-3x':ctrl.expanded}" ng-click="ctrl.toggleDetails()"></i>
        </tool>

        <div class="toolbox-expander" ng-click="ctrl.toggleExpand()">
            <div class="expander-wrapper">
                <i class="fa fa-chevron-right" ng-class="{'fa-chevron-right':!ctrl.expanded, 'fa-chevron-left':ctrl.expanded}"></i>
            </div>
        </div>
    </div>
    <div class="toolbox-drawer" ng-class="{'drawer-open':ctrl.showDetails,'expanded':ctrl.expanded}">
        <div class="toolbox-drawer-top">
            <!-- SEARCH -->
            <div class="search-container box well">
                <span class="icon"><i class="fa fa-search"></i></span>
                <input type="search" class="search" placeholder="Search for a station"
                    ng-model="ctrl.stationQuery"
                    update-on-enter
                    ng-change="ctrl.searchStations()"
                    ng-model-options="ctrl.searchOptions"/>
            </div>

            <!-- SEARCH RESULTS FOR STATIONS -->
            <div class="station-container" ng-if="ctrl.stationQueryResults.length > 0">
                <table class="table">
                    <thead>
                        <tr>
                            <th><span class="pull-left">Find</span></th>
                            <th><span>Station Name</span></th>
                            <th><input class="pull-right" type="checkbox"></th>
                        </tr>
                    </thead>
                    <tr ng-repeat="marker in ctrl.stationQueryResults track by marker.id">
                        <td>
                            <button class="btn btn-map-marker pull-left" ng-click="ctrl.setSelectedStation(marker)">
                            <span class="fa fa-map-marker" uib-tooltip="Locate On Map" tooltip-placement="left"></span>
                            </button>
                        </td>
                        <td>{{::marker.name}}</td>
                        <td><input class="pull right" type="checkbox" ng-click="ctrl.setSelectedStation(marker)"></td>
                    </tr>
                </table>
            </div>

            <!-- SEARCH RESULTS FOR GROUPS -->
            <div class="group-container" ng-if="ctrl.stationQueryResults.length > 0">
                <table class="table">
                    <thead>
                    <tr>
                        <th><span>Group Name</span></th>
                        <th><input class="pull-right" type="checkbox"></th>
                    </tr>
                    </thead>
                    <tr ng-repeat="marker in ctrl.stationQueryResults track by marker.id">
                        <td>{{::marker.name}}</td>
                        <!-- TODO: add all markers in GROUP -->
                        <td><input class="pull-right" type="checkbox"></td>
                    </tr>
                </table>
            </div>

            <!-- USER STATION SELECTION -->
            <div class="selection-container">
                <table class="table">
                    <thead>
                    <tr>
                        <th><span>Station Name</span></th>
                        <th><input class="pull-right" type="checkbox"></th>
                    </tr>
                    </thead>
                    <tr ng-repeat="marker in ctrl.stationGroup track by marker.id">
                        <td>{{::marker.name}}</td>
                        <td><input class="pull-right" type="checkbox"></td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="toolbox-drawer-bottom">

        </div>

        <!-- Search for Stations -->
        <!--<uib-accordion>-->
            <!--<uib-accordion-group style="color:black" heading="Search Stations">-->
                <!--<div class="box well">-->
                    <!--<div class="container">-->
                        <!--<span class="icon"><i class="fa fa-search"></i></span>-->
                        <!--<input type="search" class="search" placeholder="Search for a station"-->
                               <!--ng-model="ctrl.stationQuery"-->
                               <!--update-on-enter-->
                               <!--ng-change="ctrl.searchStations()"-->
                               <!--ng-model-options="ctrl.searchOptions"/>-->
                    <!--</div>-->
                <!--</div>-->
                <!--<div class="list-group" ng-if="ctrl.stationQueryResults.length > 0">-->
                    <!--<div class="list-group-item" ng-repeat="marker in ctrl.stationQueryResults track by marker.id | orderBy:ctrl.sortOrder">-->
                        <!--<span class="item-label pull-left">{{::marker.name}}</span>-->
                        <!--<button class="btn btn-map-marker pull-right" ng-click="ctrl.setSelectedStation(marker)">-->
                            <!--<span class="fa fa-map-marker" uib-tooltip="Locate On Map" tooltip-placement="left"></span>-->
                        <!--</button>-->
                        <!--<button ng-if="!ctrl.isMarkerInGroup(marker)" class="btn pull-right active" ng-click="ctrl.addMarkerToGroup(marker)">-->
                            <!--<span class="fa fa-plus"></span>-->
                        <!--</button>-->
                        <!--<button ng-if="ctrl.isMarkerInGroup(marker)" class="btn pull-right" ng-click="ctrl.removeMarkerFromGroup(marker)">-->
                            <!--<span class="fa fa-minus"></span>-->
                        <!--</button>-->
                    <!--</div>-->
                <!--</div>-->
            <!--</uib-accordion-group>-->
        <!--</uib-accordion>-->

        <!-- Group Stations -->
        <!--<uib-accordion>-->
            <!--<uib-accordion-group style="color:black" heading="Group Stations">-->
                <!--&lt;!&ndash; Current Selected Station &ndash;&gt;-->
                <!--<div class="list-group" id="station-container" ng-if="ctrl.currentStation.hasOwnProperty('id')">-->
                    <!--<div class="list-group-item station-header">-->
                        <!--<span class="item-label pull-left">{{ctrl.currentStation.name}}</span>-->
                        <!--<button class="btn btn-map-marker pull-right" ng-click="ctrl.setSelectedStation(ctrl.currentStation)">-->
                            <!--<span class="fa fa-map-marker" uib-tooltip="Locate On Map" tooltip-placement="left"></span>-->
                        <!--</button>-->
                        <!--<button ng-if="!ctrl.isMarkerInGroup(ctrl.currentStation)" class="btn pull-right active" ng-click="ctrl.addMarkerToGroup(ctrl.currentStation)">-->
                            <!--<span class="fa fa-plus"></span>-->
                        <!--</button>-->
                        <!--<button ng-if="ctrl.isMarkerInGroup(ctrl.currentStation)" class="btn pull-right" ng-click="ctrl.removeMarkerFromGroup(ctrl.currentStation)">-->
                            <!--<span class="fa fa-minus"></span>-->
                        <!--</button>-->
                    <!--</div>-->
                    <!--<div class="well" ng-if="ctrl.currentStation.hasOwnProperty('id')">-->
                        <!--<div class="station-desc">-->
                            <!--<span>Agency: {{ctrl.currentStation.agency}}</span>-->
                            <!--<span>City: {{ctrl.currentStation.city}}</span>-->
                            <!--<span>State: {{ctrl.currentStation.state}}</span>-->
                            <!--<span>Postal: {{ctrl.currentStation.postal}}</span>-->
                            <!--<span>Current AQI: {{ctrl.currentStation.aqi}}</span>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->
                <!--&lt;!&ndash; Collection of Stations in Selection &ndash;&gt;-->
                <!--<div class="list-group">-->
                    <!--<div class="list-group-item" ng-repeat="marker in ctrl.stationGroup">-->
                        <!--<span class="item-label pull-left">{{::marker.name}}</span>-->
                        <!--<button class="btn btn-map-marker pull-right" ng-click="ctrl.setSelectedStation(marker)">-->
                            <!--<span class="fa fa-map-marker" uib-tooltip="Locate On Map" tooltip-placement="left"></span>-->
                        <!--</button>-->
                        <!--<button class="btn pull-right" ng-click="ctrl.removeMarkerFromGroup(marker)">-->
                            <!--<span class="fa fa-minus"></span>-->
                        <!--</button>-->
                    <!--</div>-->
                <!--</div>-->
            <!--</uib-accordion-group>-->
        <!--</uib-accordion>-->

        <!-- Group Parameters-->
        <!--<uib-accordion>-->
            <!--<uib-accordion-group style="color:black" heading="Pollutants">-->
                <!--<div class="box well">-->
                    <!--<div class="container">-->
                        <!--<span class="icon"><i class="fa fa-search"></i></span>-->
                        <!--<input ng-model="q" type="search" class="search" placeholder="pollutant type"/>-->
                    <!--</div>-->
                <!--</div>-->
                <!--<div class="list-group">-->
                    <!--<div class="list-group-item" ng-repeat="pollutant in ctrl.pollutantOptions | filter:q">-->
                        <!--<span class="item-label pull-left">{{::pollutant.name}}</span>-->
                        <!--<button class="btn pull-right" ng-class="{'active': !pollutant.selected}" ng-click="ctrl.togglePollutantOption(pollutant)">-->
                            <!--<span class="fa fa-plus" ng-if="!pollutant.selected"></span>-->
                            <!--<span class="fa fa-minus" ng-if="pollutant.selected"></span>-->
                        <!--</button>-->
                    <!--</div>-->
                <!--</div>-->
            <!--</uib-accordion-group>-->
        <!--</uib-accordion>-->

        <!-- Turn Clusters On/Off-->
        <!--<uib-accordion>-->
            <!--<uib-accordion-group style="color:black"heading="Turn Cluster On / Off">-->
                <!--<div class="box well">-->
                    <!--<div class="container">-->
                        <!--<span class="icon"><i class="fa fa-search"></i></span>-->
                        <!--<input ng-model="q" type="search" class="search" placeholder="search by state..."/>-->
                    <!--</div>-->
                <!--</div>-->
                <!--<div class="list-group">-->
                    <!--<div class="list-group-item" ng-repeat="cluster in ctrl.clusters | filter:q">-->
                        <!--<span class="item-label pull-left">{{cluster.name}}</span>-->
                        <!--<button class="btn pull-right" ng-class="{'active': cluster.visible}" ng-click="cluster.visible = !cluster.visible; ctrl.toggleCluster(cluster)">-->
                            <!--<span ng-if="cluster.visible">On</span>-->
                            <!--<span ng-if="!cluster.visible">Off</span>-->
                        <!--</button>-->
                    <!--</div>-->
                <!--</div>-->
                <!--<div class="cluster-toggles">-->
                    <!--<button class="btn" ng-click="ctrl.showAllClusters()">Show All Clusters</button>-->
                    <!--<button class="btn active" ng-click="ctrl.hideAllClusters()">Hide All Clusters</button>-->
                <!--</div>-->
            <!--</uib-accordion-group>-->
        <!--</uib-accordion>-->
    </div>
</div>



